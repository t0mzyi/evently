<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Evently â€” Discover & Experience</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            theme: {
              primary: '#1C2A3A',
              highlight: '#2C3E50',
              secondary: '#1C2A3A',
              accent: '#5C7C8A',
              dark: '#1C2A3A',
              surface: '#F9F7F5',
            },
            apple: {
              bg: '#EAE0CF',
              card: 'rgba(255, 255, 255, 0.6)',
              text: '#1C2A3A',
              secondary: '#5C7C8A',
              accent: '#1C2A3A'
            }
          },
          fontFamily: {
            heading: ['Playfair Display', 'serif'],
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <style>
    .category-thumb {
      font-size: 24px;
      line-height: 1;
      display: inline-block;
      width: 24px;
      height: 24px;
      text-align: center;
    }

    .swiper {
      width: 100%;
      padding-top: 5px;
      padding-bottom: 50px;
    }

    .swiper-slide {
      background-position: center;
      background-size: cover;
      width: 600px;
      height: 400px;
      overflow: hidden;
      will-change: transform;
      transform: translateZ(0);
    }

    @media (max-width: 768px) {
      .swiper-slide {
        width: 300px;
        height: 350px;
      }
    }

    .marquee-container {
      overflow: hidden;
      white-space: nowrap;
      position: relative;
      height: 80px;
    }

    .marquee-content,
    .marquee-content-reverse {
      display: inline-block;
      animation: marquee 25s linear infinite;
      padding-left: 20px;
    }

    .marquee-content-reverse {
      animation-direction: reverse;
    }

    @keyframes marquee {
      0% {
        transform: translateX(0);
      }

      100% {
        transform: translateX(-50%);
      }
    }

    .category-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #F9F7F5;
      padding: 12px 24px;
      border-radius: 50px;
      margin: 0 12px;
      text-decoration: none;
      color: #1C2A3A;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .category-pill:hover {
      background: #E5E0D8;
      transform: scale(1.05);
    }

    /* Hide scrollbar for marquee */
    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&display=swap" rel="stylesheet">
</head>

<body class="bg-apple-bg text-apple-text">

  <!-- Navigation -->
  <%- include('partials/navbar') %>
  <%- include('partials/doodles') %>

  <!-- Hero Section -->
  <header class="relative pt-40 pb-16 px-6 text-center overflow-hidden">
    <div class="max-w-4xl mx-auto relative z-10">
      <h1 class="text-5xl md:text-7xl font-heading font-medium tracking-tight mb-8 text-[#1C2A3A] leading-tight">
        Discover events happening <br /> around you
      </h1>

      <!-- Search Bar -->
      <div class="relative max-w-2xl mx-auto mb-6">
        <input type="text" placeholder="search events, categories" class="w-full h-14 pl-12 pr-6 bg-[#E5E0D8] border-none rounded-[1rem] text-lg text-[#1C2A3A] placeholder:text-[#1C2A3A]/40 focus:outline-none focus:ring-1 focus:ring-[#1C2A3A]/20 transition-all font-sans">
        <svg class="absolute left-4 top-4 w-5 h-5 text-[#1C2A3A]/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </div>
    </div>

    <h2 class="text-xl font-medium text-[#1C2A3A] tracking-tight px-6 font-heading">
      Featured Events ðŸŽŠ
    </h2>

    <!-- Trending Carousel -->
    <div class="w-full relative z-10">
      <div class="swiper mySwiper mb-16 !max-w-full !px-4 md:!px-10">
        <div class="swiper-wrapper">
          <% for(let i = 0; i < featuredEvents.length; i++) { %>
          <a href="/view-event" class="swiper-slide group relative cursor-pointer block">
            <img src="<%= featuredEvents[i].galleryImages[0] %>" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" alt="Event">
            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-8">
              <h3 class="text-3xl font-heading text-white tracking-tight uppercase mb-2 drop-shadow-md">
                <%= featuredEvents[i].title %>
              </h3>
              <p class="text-white/80 text-sm font-sans tracking-wide"><%= formatDate(featuredEvents[i].startDate).date %></p>
            </div>
          </a>
          <% } %>

          <!-- Duplicate for seamless loop -->
          <% for(let i = 0; i < featuredEvents.length; i++) { %>
          <a href="/view-event" class="swiper-slide group relative cursor-pointer block">
            <img src="<%= featuredEvents[i].galleryImages[0] %>" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" alt="Event">
            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-8">
              <h3 class="text-3xl font-heading text-white tracking-tight uppercase mb-2 drop-shadow-md">
                <%= featuredEvents[i].title %>
              </h3>
              <p class="text-white/80 text-sm font-sans tracking-wide"><%= formatDate(featuredEvents[i].startDate).date %></p>
            </div>
          </a>
          <% } %>
        </div>
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </header>

  <!-- Explore Categories -->
  <section class="max-w-full w-full mb-24 relative z-10 overflow-hidden">
    <div class="text-center mb-16 px-6">
      <h2 class="text-4xl font-heading text-[#1C2A3A] tracking-tight mb-2">Explore by category</h2>
      <p class="text-[#1C2A3A]/60 text-lg font-sans">Discover tailored experiences across every genre</p>
    </div>

    <div class="marquee-container no-scrollbar">
      <div class="marquee-content" id="row1">
        <% for(let i = 0; i < allCategories.length; i++) { %>
        <a href="/category/<%= allCategories[i]._id %>" class="category-pill">
          <span class="category-thumb"><%= allCategories[i].iconUrl %></span>
          <span><%= allCategories[i].name %></span>
        </a>
        <% } %>
      </div>

      <div class="marquee-content-reverse" id="row2">
        <% for(let i = allCategories.length - 1; i >= 0; i--) { %>
        <a href="/category/<%= allCategories[i]._id %>" class="category-pill">
          <span class="category-thumb"><%= allCategories[i].iconUrl %></span>
          <span><%= allCategories[i].name %></span>
        </a>
        <% } %>
      </div>
    </div>
  </section>

  <main class="max-w-7xl mx-auto px-6 space-y-24 pb-24">

    <!-- All Events -->
    <section class="max-w-7xl mx-auto px-6 mb-24">
      <div class="flex justify-between items-center mb-10">
        <h2 class="text-4xl font-heading text-[#1C2A3A] tracking-tight">All events</h2>
        <div class="flex space-x-3">
          <button class="events-prev w-12 h-12 rounded-full border border-[#1C2A3A]/10 flex items-center justify-center bg-[#F9F7F5] hover:bg-white transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="M15 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
          <button class="events-next w-12 h-12 rounded-full border border-[#1C2A3A]/10 flex items-center justify-center bg-[#F9F7F5] hover:bg-white transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="M9 5l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
        </div>
      </div>

      <div class="swiper eventsSwiper overflow-hidden">
        <div class="swiper-wrapper">
          <% for(let i = 0; i < allEvents.length; i++) { %>
          <a href="/events/<%= allEvents[i]._id %>" class="swiper-slide bg-[#B8B2A6] rounded-[1.5rem] overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 relative group block">
            <div class="h-[280px] relative">
              <img src="<%= allEvents[i].galleryImages[0] %>" class="w-full h-full object-cover" alt="Event">
              <div class="absolute bottom-0 left-0 p-6 w-full bg-gradient-to-t from-black/80 to-transparent">
                <h3 class="text-3xl font-heading text-white lowercase"><%= allEvents[i].title %></h3>
                <div class="flex gap-2 mt-2">
                  <span class="px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-[10px] font-bold uppercase tracking-wider text-white">
                    <%= allEvents[i].categoryId.name %>
                  </span>
                </div>
              </div>
            </div>
            <div class="p-6">
              <p class="text-[#1C2A3A]/70 text-xs leading-relaxed mb-8 font-sans">
                <%= allEvents[i].description.substring(0, 100) + '...' %>
              </p>
              <div class="absolute bottom-6 right-0 bg-[#ED8842] py-2 pl-4 pr-6 rounded-l-full flex items-center shadow-md">
                <% const minPrice = Math.min(...allEvents[i].ticketTypes.map(t => t.price)) %>
                <% if(minPrice && minPrice > 0) { %>
                <span class="text-white font-heading text-xl tracking-tight">Starting From $<%= minPrice %></span>
                <% } else { %>
                <span class="text-white font-heading text-xl tracking-tight">Free</span>
                <% } %>
              </div>
            </div>
          </a>
          <% } %>
        </div>
      </div>
    </section>

    <!-- All Venues -->
    <section class="max-w-7xl mx-auto px-6 mb-24">
      <div class="flex justify-between items-center mb-10">
        <h2 class="text-4xl font-heading text-[#1C2A3A] tracking-tight">All venues</h2>
        <a href="/venues" class="px-6 py-2 bg-[#F9F7F5] border border-[#1C2A3A]/10 rounded-full text-sm font-medium text-[#1C2A3A] flex items-center space-x-2 hover:bg-white transition-colors">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
          </svg>
          <span>View All venues</span>
        </a>
      </div>

      <div class="swiper venuesSwiper overflow-hidden">
        <div class="swiper-wrapper">
          <% for(let i = 0; i < allVenues.length; i++) { %>
          <a href="/venue/<%= allVenues[i]._id %>" class="swiper-slide bg-[#B8B2A6] rounded-[1.5rem] overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 relative group block">
            <div class="h-[280px] relative">
              <img src="<%= allVenues[i].image_url[0] %>" class="w-full h-full object-cover" alt="<%= allVenues[i].name %>">
              <div class="absolute bottom-0 left-0 p-6 w-full bg-gradient-to-t from-black/80 to-transparent">
                <h3 class="text-3xl font-heading text-white lowercase"><%= allVenues[i].name %></h3>
                <div class="flex gap-2 mt-2">
                  <span class="px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-[10px] font-bold uppercase tracking-wider text-white">
                    <%= allVenues[i].type %>
                  </span>
                  <span class="px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-[10px] font-bold uppercase tracking-wider text-white">
                    <%= allVenues[i].capacity %> Cap
                  </span>
                </div>
              </div>
            </div>
          </a>
          <% } %>
        </div>
      </div>

      <!-- Optional: Venue navigation buttons -->
      <div class="flex justify-center space-x-3 mt-8">
        <button class="venues-prev w-10 h-10 rounded-full border border-[#1C2A3A]/10 flex items-center justify-center bg-[#F9F7F5] hover:bg-white transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M15 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
        <button class="venues-next w-10 h-10 rounded-full border border-[#1C2A3A]/10 flex items-center justify-center bg-[#F9F7F5] hover:bg-white transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M9 5l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="border-t border-black/5 py-20 px-6 bg-[#2D2520]">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center space-y-8 md:space-y-0 text-sm text-white/60">
      <div class="flex items-center space-x-8">
        <span class="text-white font-medium">evently</span>
        <div class="flex space-x-6">
          <a href="#" class="hover:text-white transition-colors">Terms</a>
          <a href="#" class="hover:text-white transition-colors">Privacy</a>
          <a href="#" class="hover:text-white transition-colors">Contact</a>
        </div>
      </div>
      <div>
        <p>&copy; 2026 Evently Inc. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Initialize Swipers -->
  <script>
    // Featured Events Swiper
    var swiper = new Swiper(".mySwiper", {
      effect: "coverflow",
      grabCursor: true,
      centeredSlides: true,
      slidesPerView: "auto",
      spaceBetween: 50,
      loop: true,
      autoplay: {
        delay: 2500,
        disableOnInteraction: false,
      },
      coverflowEffect: {
        rotate: 0,
        stretch: 0,
        depth: 100,
        modifier: 1,
        slideShadows: true,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
    });

    // Marquee setup
    function setupMarquee(id) {
      const el = document.getElementById(id);
      if (el) {
        const content = el.innerHTML;
        el.innerHTML = content + content;
      }
    }

    window.addEventListener('load', () => {
      setupMarquee('row1');
      setupMarquee('row2');
    });

    // All Events Swiper
    var eventsSwiper = new Swiper(".eventsSwiper", {
      slidesPerView: 1.15,
      spaceBetween: 30,
      grabCursor: true,
      navigation: {
        nextEl: ".events-next",
        prevEl: ".events-prev",
      },
      breakpoints: {
        768: {
          slidesPerView: 2,
        },
        1024: {
          slidesPerView: 3,
        },
      },
    });

    // All Venues Swiper
    var venuesSwiper = new Swiper(".venuesSwiper", {
      slidesPerView: 1.15,
      spaceBetween: 20,
      grabCursor: true,
      navigation: {
        nextEl: ".venues-next",
        prevEl: ".venues-prev",
      },
      breakpoints: {
        640: {
          slidesPerView: 1.5,
        },
        768: {
          slidesPerView: 2,
        },
        1024: {
          slidesPerView: 3,
        },
      },
    });
  </script>
</body>

</html>